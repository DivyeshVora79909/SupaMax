{
  "buckets": [
    {
      "name": "student-docs",
      "public": false,
      "file_size_limit": 5242880,
      "allowed_mime_types": ["application/pdf", "image/jpeg", "image/png"]
    },
    {
      "name": "teacher-resources",
      "public": false,
      "file_size_limit": 10485760,
      "allowed_mime_types": [
        "application/pdf",
        "application/msword",
        "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
      ]
    }
  ],
  "policies": [
    {
      "name": "Tenants can access their own student docs",
      "bucket_id": "student-docs",
      "definition": "auth.tenant_id() = (storage.foldername(name))[1]::uuid",
      "operation": "ALL"
    },
    {
      "name": "Tenants can access their own teacher resources",
      "bucket_id": "teacher-resources",
      "definition": "auth.tenant_id() = (storage.foldername(name))[1]::uuid",
      "operation": "ALL"
    }
  ]
}
